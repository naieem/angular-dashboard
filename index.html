<!DOCTYPE html>
<html dir="ltr" lang="en-US" ng-app="main" ng-cloak="">

<head>
    <meta charset="utf-8">
    <!-- v10569 -->
    <title>
        SalesRipe
    </title>
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="r8KCwvCDYypB1SXyqsg+O6llehQoM1fjTl5+qcKFlU9ci2NGdeEJ7kyKy9mf8T1uBYrLVdEuLBJLsoGPXhsPew==" name="csrf-token" />
    <link href="https://salesripe.zendesk.com/hc/en-us" rel="canonical" />
    <!-- Entypo pictograms by Daniel Bruce — www.entypo.com -->
    <link href="img/index.jpg" rel="shortcut icon" type="image/x-icon" />
    <!-- Bootstrap styles -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="css/angucomplete-alt.css" />
    <!--[if lt IE 9]>
  <script>
    //Enable HTML5 elements for <IE9
    'abbr article aside audio bdi canvas data datalist details dialog \
    figcaption figure footer header hgroup main mark meter nav output \
    progress section summary template time video'.replace(/\w+/g,function(n){document.createElement(n)});
  </script>
  <![endif]-->
    </link>
    </meta>
</head>

<body class="" ng-controller="HomeCtrl as home">
    <div id="contact-form">
        <form action="" class="support_form" method="post" role="form">
            <h2>
                Submit  a Ticket
            </h2>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="email">
                        Full Name
                    </label>
                    <input class="form-control" id="fname" name="fname" placeholder="Michael Ron" required="" type="text">
                    </input>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="email">
                        Email
                    </label>
                    <input class="form-control" id="email" name="email" placeholder="demo@gmail.com" required="" type="email">
                    </input>
                </div>
            </div>
            <div class="col-md-12">
                <div class="form-group">
                    <label for="pwd">
                        Message
                    </label>
                    <textarea class="msg" name="msg">
                    </textarea>
                </div>
            </div>
            <div class="col-md-12 submit-part">
                <button class="btn btn-default submit" id="sign-up-mask" type="submit">
                    Send
                </button>
                <button class="btn btn-default" id="sign-up-cancel">
                    Cancel
                </button>
            </div>
        </form>
        <div class="return_msg">
        </div>
    </div>
    <header class="header">
        <div class="header-inner clearfix">
            <div class="logo">
                <a href="#" title="Home">
                    <img alt="Logo" src="img/logo_new.png">
                    </img>
                </a>
            </div>
            <nav class="user-nav">
                <a href="#">
            Home
        </a>
                <a href="#">
            Features
        </a>
                <a href="#">
            Pricing
        </a>
                <a href="#">
            Faq
        </a>
                <a href="#">
            Company
        </a>
                <a class="initialism ticket" href="#contact-form">
            submit a ticket
        </a>
            </nav>
        </div>
    </header>
    <main role="main">
        <div class="search-box">
            <h1 class="help-center-title">
            Welcome,we will be glad to help you.
        </h1>
            <form accept-charset="UTF-8" action="/hc/en-us/search" autocomplete="off" class="search" data-instant="true" data-search="" method="get" role="search">
                <!-- <input type="text" auto-complete ui-items="titles" ng-model="q" placeholder="Search" /> -->
                <div angucomplete-alt id="ex5" placeholder="Search Articles" pause="500" selected-object="callbackFunction" remote-url="./db.php?action=search" remote-url-request-formatter="remoteUrlRequestFn" remote-url-data-field="info" title-field="title" description-field="" minlength="3" input-class="form-control form-control-small" match-class="highlight">
                </div>
                <input name="commit" type="submit" value="Search" data-ng-click="home.search(q);$event.preventDefault();" />
            </form>
            <div class="popular-search">
                <p>
                    <span>
                    Popular searches:
                </span>
                    <a class="js-link-article" href="#" data-ng-click="home.search(pp.word);$event.preventDefault();" data-ng-repeat="pp in home.popular">
                    {{pp.word}},
                </a>
                </p>
            </div>
        </div>
        <div class="knowledge-base clearfix row">
            <div class="category-tree">
                <section class="category" ng-click="home.getContent(menu.id);$event.preventDefault();" ng-repeat="menu in home.info">
                    <h2>
                        <a href="#">
                            {{menu.title}}
                        </a>
                    </h2>
                </section>
            </div>
            <div class="cat-container">
                <div class="cat" ng-bind-html="home.d">
                </div>
                <div ng-show="dcsn=='active'">
                    <ul>
                        <ol class="resultTitle" data-ng-repeat="info in result" data-ng-click="home.getContent(info.id);">
                            <h2>{{info.title}}</h2>
                        </ol>
                    </ul>
                </div>
            </div>
        </div>
        <div class="community">
            <div data-app="recent-activity" data-url="/hc/api/internal/recent_activities?locale=en-us">
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="footer-inner">
            <div class="logo-footer">
                <a href="#">
                    <img src="img/logo_new.png" />
                </a>
                <br> © 2016 | Copyright
                <span>
                    Sales Ripe LLC
                    <span>
                    </span>
                </span>
                </br>
            </div>
            <div class="menu">
                <ul>
                    <li>
                        <a href="#">
                        Features
                    </a>
                    </li>
                    <li>
                        <a href="#">
                        Pricing
                    </a>
                    </li>
                    <li>
                        <a href="#">
                        FAQ
                    </a>
                    </li>
                    <li>
                        <a href="#">
                        Company
                    </a>
                    </li>
                    <li>
                        <a href="#">
                        Contract
                    </a>
                    </li>
                </ul>
            </div>
            <div class="social">
                <ul>
                    <li>
                        <a class="facebook" href="" target="_blank">
                            <i aria-hidden="true" class="fa fa-facebook">
                        </i>
                        </a>
                    </li>
                    <li>
                        <a class="linkedin" href="" target="_blank">
                            <i aria-hidden="true" class="fa fa-linkedin">
                        </i>
                        </a>
                    </li>
                    <li>
                        <a class="google" href="" target="_blank">
                            <i aria-hidden="true" class="fa fa-google-plus">
                        </i>
                        </a>
                    </li>
                    <li>
                        <a class="twitter" href="" target="_blank">
                            <i aria-hidden="true" class="fa fa-twitter">
                        </i>
                        </a>
                    </li>
                    <li>
                        <a class="youtube" href="" target="_blank">
                            <i aria-hidden="true" class="fa fa-youtube-play">
                        </i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </footer>
    <script src="js/jquery.library.js">
    </script>
    <!-- Include jQuery Popup Overlay -->
    <script src="https://cdn.rawgit.com/vast-engineering/jquery-popup-overlay/1.7.13/jquery.popupoverlay.js">
    </script>
    <!--custom jquery -->
    <script src="js/jquery.main.js" type="text/javascript"></script>
    <!-- Angular Core plugins -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-resource.js">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-sanitize.js">
    </script>
    <script src="js/angucomplete-alt.js"></script>
    <script type="text/javascript">
    var app = angular.module('main', ['ngResource', "ngSanitize", "angucomplete-alt"]);
    app.factory('Articles', Articles);
    Articles.$inject = ['$resource'];
    app.controller('HomeCtrl', HomeCtrl);
    HomeCtrl.$inject = ['$scope', 'Articles', '$sce', '$timeout'];

    function HomeCtrl($scope, Articles, $sce, $timeout) {
        var vm = this;
        vm.d;
        vm.popular;
        $scope.q = '';
        $scope.titles = [];
        $scope.dcsn;
        $scope.result;
        let info = {
            action: "getall"
        }
        vm.getAll = function() {
            Articles.query(info, function(data) {
                vm.info = data;
                vm.d = $sce.trustAsHtml(data[0].description);
                vm.info.map(function(i) {
                    $scope.titles.push(i.title);
                    //return i.title;
                });
            });
        }
        vm.getAll();
        vm.getAllPopular = function() {
            let info = {
                action: "getallpop"
            }
            Articles.query(info, function(data) {
                vm.popular = data;
                console.log(data);
            });
        }
        vm.getAllPopular();
        vm.getContent = function(id) {
            vm.d = "<center><img src='img/squares.gif'></center>";
            let info = {
                id: id,
                action: "getContent"
            }
            Articles.get(info, function(data) {
                vm.d = $sce.trustAsHtml(data.description);
                $scope.dcsn = "";
                //console.log(data);
            });
        }
        $scope.callbackFunction = function(selected) {
            if (selected) {
                console.log('You have selected ' + selected.title);
                $scope.q = selected.title;
                vm.getAllPopular();
            } else {
                console.log('cleared');
            }
        };
        vm.search = function(v) {
            vm.d = "<center><img src='img/squares.gif'></center>";
            if (v == '') {
                $scope.result = '';
                vm.d = "<h2>No Results Found</h2>";
                //alert(v);
            } else {
                let info = {
                    q: v,
                    action: "search"
                }
                Articles.get(info, function(data) {
                    $scope.dcsn = data.result;
                    $scope.result = data.info;
                    vm.d = "";
                    vm.getAllPopular();
                    //console.log(data.result);
                });
                $scope.q = '';
            }

            // $timeout(function() {
            //     console.log($scope.dcsn);
            //     //$state.go('home');
            // }, 3000);

        }
        $scope.remoteUrlRequestFn = function(str) {
            return {
                q: str,
            };
        };
    }
    app.directive('autoComplete', function($timeout) {
        return function(scope, iElement, iAttrs) {
            iElement.autocomplete({
                source: scope[iAttrs.uiItems],
                select: function() {
                    $timeout(function() {
                        iElement.trigger('input');
                    }, 0);
                }
            });
        };
    });

    function Articles($resource) {
        return $resource('./db.php', {}, {
            query: {
                method: "GET",
                isArray: true
            },
            create: {
                method: "POST"
            },
            get: {
                method: "GET"
            },
            remove: {
                method: "POST"
            },
            update: {
                method: "PUT"
            }
        });
    }
    </script>
</body>

</html>
